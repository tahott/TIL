# 단순하게 시도해보는 멀티레포를 모노레포로 병합
2024년 5월에는 모노레포에 대해서 관심이 생겨 관련하여 이런저런 생각도하고 찾아도 보다가 우선 독립적으로 존재하는 프로젝트를 모노레포로 간단하게 구현해 보기로 했다. 이렇게 해보는 이유는 단순한 코드만 옮겨서 설정하는 것은 쉽게 할 수도 있지만 기존에 존재하던 프로젝트라면 그 프로젝트에 있는 깃 히스토리가 중요할 것이다. 모노레포로 병합할 때 완전 새출발 할 것이 아니라면 기존의 히스토리를 그대로 가져가는 것이 중요하다고 생각을 한다

## 2개의 저장소에서 개발되던 프로젝트의 깃 히스토리를 하나로 통합해보자
먼저 모노레포 저장소로 운영할 디렉토리를 만들고 git 초기화를 하자
```bash
$ mkdir monorepo
$ cd monorepo
$ git init
```

멀티레포로 운영되던 프로젝트들을 모노레포의 apps/ 내에서 관리를 하자
```bash
$ mkdir apps
$ git remote add <repo1> <repo1 url>
$ git fetch
$ git merge repo1/main --allow-unrelated-histories
$ git log
```
위 명령어까지 수행하면 repo1의 깃 히스토리가 현재 저장소로 복사가 되었음을 알 수 있다
git merge를 실행할 때 병합 충돌이 발생할 수 있는데, 이를 해결하고 repo1의 파일들을 apps내로 옮긴 후 커밋을 하면 된다

이후 두번째 레포도 첫번째 레포와 같은 방법으로 진행을 하면 아래와 같은 구조가 될 것이다
```
apps
  |--repo1
  |--repo2
.git
```
이후 루트 폴더에 lerna, yarn workspace, turborepo등을 활용해서 모노레포 설정을 하여 사용을 하면 될 것 같다