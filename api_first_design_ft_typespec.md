# API FIRST DESIGN
최근에 API 구현 일을 하며 느낀 불편함을 개선 해보려고 생각을 하니 그 동안 눈에 띄지 않던 글들<sup>[1](#블로그)</sup>과 영상이<sup>[2](#유투브)</sup> 보이기 시작했다. 내가 생각하는 문제점이 다른 개발자들에게도 겪은 문제라고 생각하니 잘 알아보고 더욱 개선을 하고 싶어졌다. API FIRST DESIGN이 무엇일까? 뜻을 그대로 풀어보면 `API를 먼저 디자인한다`. 이 말만 보면 그거 지금도 하고 있는거 아닌가요? 라고 할 수 있고 그 말이 틀리지는 않을 것이다. 다만 나는 API FIRST DESIGN에서 이어지는 시작과 끝의 과정을 이해하고 실천한 것을 설명해 보려 한다.

## PROBLEM
문제를 겪고 있는 상황을 보면 API 스펙 협의를 노션, 위키 혹은 티켓에 적고 스펙 자체를 공유한다. 그리고 당장에는 문제를 느끼지 못할 수 있다. 하지만 시간이 흘러 API를 수정해야 한다면? 문서에 수정사항이 반영이 될까? 구전으로 전해지거나 메신저로 이렇게 수정할게요 하고 끝난다면 문서는 관리되지 않고 최신 상태임을 보장하지 못해 신뢰성을 잃고 이력이 관리되지 않아 무의미한 문서가 될 것이다.

## SOLUTION
이를 해결하기 위해 API FIRST DESIGN을 하며 공통적으로 OAS(Openapi Specification)로 문서를 작성하여 협의하고 관리 되도록 한다. 문서는 형상관리하여 이력을 추적하고 이해관계자가 자유롭게 생성, 수정하도록한다. 이때, 협의하는 과정 자체를 PR하여 백엔드 프론트엔드 서로가 합의한다. 협의가 이루어지면 OAS 문서를 기반으로 백엔드 프론트엔드는 서로 병렬적으로 피처 개발을 한다. 프론트엔드는 스펙에 맞게 mocking하고 백엔드는 실제로 API를 구현하여 개발 서버 혹은 QA를 위한 서버에서 만나 서로 협의한대로 개발이 완료 되었는지 점검한다.
이 과정속에서 처음부터 완벽한 API 문서는 완성되지 않을 수 있다. 무언가 요청값이나 응답값이 변할 수 있고 이럴때가 위험한 순간이다. 우리는 API FIRST DESIGN을 하기 때문에 수정이 필요한 상황에서 코드만 수정하고 전달하면 안 되고 다시 한 번 문서가 먼저 작성 되어야한다. 이미 협의한 API 스펙은 계약대로 진행하여 티켓을 끝내도록하고 새티켓을 만들어서 수정되어야 할 API 스펙을 협의하고 다시 서버/클라이언트 개발자는 각각 개발에 돌입하여 완료한다. 이 과정이 반복되어 비로소 기획이 의도한대로 동작이 완료되면 된다. 

- - -
<a name="블로그">1</a>: [커뮤니티실 API Design-First 접근방식 정착기](https://medium.com/daangn/커뮤니티실-api-design-first-접근방식-정착기-cecca0a37c05), [API-First Approach로 개발 시작하기](https://blog.mathpresso.com/api-first-approach로-개발-시작하기-c79e5ec58950)
<br />
<a name="유투브">2</a>: [오늘도 여러분의 API는 안녕하신가요?: API First Design과 CodeGen 활용하기 | 인프콘2023](https://youtu.be/mhGz8q-aOZ0?si=SmwRnm47rR8f-A8M)